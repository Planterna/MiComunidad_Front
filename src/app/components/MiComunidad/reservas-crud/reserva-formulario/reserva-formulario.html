<app-modals-alert
  [modalId]="modalId"
  [titulo]="tituloModal()"
  (confirmar)="guardar()"
  [data]="dataModal()"
/>

<div class="flex justify-center min-h-screen bg-base-200 mt-16 p-4">
  <div class="w-full max-w-[95%] sm:max-w-lg bg-base-100 shadow-xl rounded-2xl p-6 md:p-10">
    <h2 class="text-3xl font-extrabold text-center mb-8 font-montserrat text-primary">
      Editar Reserva
    </h2>

    <form
      class="flex flex-col gap-5 font-montserrat"
      [formGroup]="reservaForm"
      (ngSubmit)="abrirConfirmacion()"
    >
      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Nombre Vecino</span>
        </label>
        <select class="select select-primary w-full" formControlName="usuarioId">
          <option [value]="valueUs()">{{ nombreUS() }}</option>
        </select>
      </div>
      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Nombre Recurso</span>
        </label>
        <select class="select select-primary w-full" formControlName="recursoId">
          <option disabled selected>Seleccionar</option>
          @for (item of recursoNombres(); track $index) {
            <option [value]="item.id">{{ item.nombre }}</option>
          }
        </select>
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Fecha Reserva</span>
        </label>
        <input
          type="date"
          class="input input-bordered w-full focus:input-primary transition-all"
          formControlName="fecha"
        />
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Hora Inicio</span>
        </label>
        <input
          type="time"
          class="input input-bordered w-full focus:input-primary transition-all"
          formControlName="horaInicio"
        />
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Hora Fin</span>
        </label>
        <input
          type="time"
          class="input input-bordered w-full focus:input-primary transition-all"
          formControlName="horaFin"
        />
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Motivo</span>
        </label>
        <textarea
          class="textarea textarea-bordered w-full focus:textarea-primary transition-all"
          formControlName="motivo"
        ></textarea>
      </div>

      @if (rolId() === 'Administrador' || rolId() === 'Encargado') {
        <div class="form-control w-full">
          <label class="label">
            <span class="label-text font-semibold">Estado</span>
          </label>
          <select class="select select-primary w-full min-w-0" formControlName="estado">
            <option disabled selected>Seleccionar</option>
            <option value="Aprobada">Aprobada</option>
            <option value="Pendiente">Pendiente</option>
            <option value="Rechazada">Rechazada</option>
          </select>
        </div>
      }

      <div class="form-control">
        <label class="label cursor-pointer">
          <span class="label-text text-2xl font-bold">Activo</span>
          <input
            type="checkbox"
            checked="checked"
            class="checkbox checkbox-primary"
            formControlName="activo"
          />
        </label>
      </div>

      <div class="flex w-full items-center justify-center">
        <div class="items-start mr-3">
          <a routerLink="/reserva" class="btn btn-error"> Regresar </a>
        </div>

        @if (!reservaForm.invalid && rolId() !== '') {
          <div class="items-end">
            <button type="submit" class="btn btn-primary">Actualizar Datos</button>
          </div>
        }
      </div>
    </form>
  </div>
</div>
